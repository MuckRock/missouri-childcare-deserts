View(no_provider_join)
View(childcare_aware)
yearly_deserts <- childcare_aware %>%
right_join(no_provider_join, by = c("zcta", "pop_5_and_under"))
View(yearly_deserts)
yearly_deserts <- childcare_aware %>%
right_join(no_provider_join, by = c("zcta", "pop_5_and_under")) %>%
group_by(zcta) %>%
summarize(count = n())
library(tidyverse)
library(janitor)
library(readxl)
library(tidycensus)
library(here)
library(sf)
library(lubridate)
library(tmap)
library(DT)
# Cache the zip code tabulation data we want from the Census
options(tigris_use_cache = TRUE)
# Sets tmap to interactive mode
tmap_mode("view")
# LOAD DATA
# Load clean and crosswalked data for all zctas from ChildCareAware survey, with all other zctas and populations baked in
childcare_supply_and_demand_2019_2023 <-  read_csv(here("data", "processed", "childcare_supply_and_demand_2019_2023.csv"))
# LOAD DATA
# Load clean and crosswalked data for all zctas from ChildCareAware survey, with all other zctas and populations baked in
childcare_supply_and_demand_2019_2023 <-  read_csv(here("data", "processed", "childcare_supply_and_demand_2019_2023.csv"))
# Load all zctas not included in ChildCareAware survey
# There are 1023 unique zctas in MO according to these crosswalk
mo_zctas <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names() %>%
filter(state == "MO") %>%
distinct(zcta)
# 5 year ACS estimates pf population five and under for all zctas in the country
acs <- read_csv(here("data", "processed", "pop_zcta_5acs.csv"))
crrsa_startup_expansion <-  read_excel(here("data","raw", "CRRSA Startup and Expansion with Paid.xlsx")) %>%
clean_names()
# Load all relief data with cleaned zips and years for when and where money was dispersed to
relief_funding <- read_csv(here("data", "processed", "all_relief_cleaned.csv")) %>%
mutate(zip = as.character(zip))
# Zip code to zcta crosswalk file from UDS Mapper
zip_zcta_crosswalk <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names()
# Join crosswalk with relief funding zips to that each zip matches a zcta to correspond to desert data
# Success! All zips found a zcta
relief_zcta <- relief_funding %>%
inner_join(zip_zcta_crosswalk, by = c("zip" = "zip_code"))
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023")
View(childcare_supply_and_demand_2019_2023)
# LOAD DATA
# Load clean and crosswalked data for all zctas from ChildCareAware survey, with all other zctas and populations baked in
childcare_supply_and_demand_2019_2023 <-  read_csv(here("data", "processed", "childcare_supply_and_demand_2019_2023.csv"))
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023")
View(supply_and_demand_2023)
c
childcare_aware <- read_csv(here("data", "processed", "ChildCareAware_cleaned_and_crosswalked.csv")) %>%
mutate(zcta = as.character(zcta))
# 5 year ACS estimates pf population five and under for all zctas in the country
acs <- read_csv(here("data", "processed", "pop_zcta_5acs.csv"))
# Load all zctas not included in ChildCareAware survey
# There are 1023 unique zctas in MO according to these crosswalk
mo_zctas <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names() %>%
filter(state == "MO") %>%
distinct(zcta)
# Join MO ZCTAs with ACS data to catch zip codes with no providers but more than 50 children
all_provider_join <- mo_zctas %>%
left_join(acs, by = c("zcta" = "GEOID")) %>%
select(zcta, pop_5_and_under)
spring_2023 <- childcare_aware %>%
filter(year == 2023) %>%
right_join(all_provider_join, by = c("zcta", "pop_5_and_under"))
View(spring_2023)
View(supply_and_demand_2023)
fall_2019 <- childcare_aware %>%
filter(year == 2019) %>%
right_join(all_provider_join, by = c("zcta", "pop_5_and_under")) %>%
mutate(year == "2019")
View(fall_2019)
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year = "2023")
fall_2019 <- childcare_aware %>%
filter(year == 2019) %>%
right_join(all_provider_join, by = c("zcta", "pop_5_and_under")) %>%
mutate(year = "2019")
library(tidyverse)
library(janitor)
library(readxl)
library(tidycensus)
library(here)
library(sf)
library(lubridate)
library(tmap)
library(DT)
# Cache the zip code tabulation data we want from the Census
options(tigris_use_cache = TRUE)
# Sets tmap to interactive mode
tmap_mode("view")
# LOAD DATA
# Load clean and crosswalked data for all zctas from ChildCareAware survey, with all other zctas and populations baked in
childcare_supply_and_demand_2019_2023 <-  read_csv(here("data", "processed", "childcare_supply_and_demand_2019_2023.csv"))
# Load all zctas not included in ChildCareAware survey
# There are 1023 unique zctas in MO according to these crosswalk
mo_zctas <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names() %>%
filter(state == "MO") %>%
distinct(zcta)
# 5 year ACS estimates pf population five and under for all zctas in the country
acs <- read_csv(here("data", "processed", "pop_zcta_5acs.csv"))
crrsa_startup_expansion <-  read_excel(here("data","raw", "CRRSA Startup and Expansion with Paid.xlsx")) %>%
clean_names()
# Load all relief data with cleaned zips and years for when and where money was dispersed to
relief_funding <- read_csv(here("data", "processed", "all_relief_cleaned.csv")) %>%
mutate(zip = as.character(zip))
# Zip code to zcta crosswalk file from UDS Mapper
zip_zcta_crosswalk <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names()
# Join crosswalk with relief funding zips to that each zip matches a zcta to correspond to desert data
# Success! All zips found a zcta
relief_zcta <- relief_funding %>%
inner_join(zip_zcta_crosswalk, by = c("zip" = "zip_code"))
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year = "2023")
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023")
map_df <- supply_and_demand_2023 %>%
mutate(status_num = case_when(status == "non-desert" ~ 0,
status == "desert" ~ 1,
status == "extreme" ~ 3)) %>%
select(zcta, status, status_num, ratio)
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023") %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
ratio >= 10 ~ "extreme",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert"))
View(supply_and_demand_2023)
map_df <- supply_and_demand_2023 %>%
mutate(status_num = case_when(status == "non-desert" ~ 0,
status == "desert" ~ 1,
status == "extreme" ~ 3)) %>%
select(zcta, status, status_num, ratio)
# JOIN CROSSWAKLED DATA WITH GEOM FOR MAPPING
# Now we can use zctas to get geoms for mapping
# Get the 2017-2021 5-year ACS ZTCAs for the whole US so that we can join these with zip codes and get geoms for mapping
# B09001_005 is a dummy variable, we just need the geoms from the call
zcta_geoms <- get_acs(geography = "zip code tabulation area", variables = "B09001_005", geometry = TRUE)  %>%
select(GEOID, geometry)
# Join the survey and non-survey data with geoms from Census for mapping
# This join to zcta geoms from ACS data drops 5 values, but anti join shows they are all non-deserts and "point" zctas for PO boxes
map_df_sf <- map_df %>%
inner_join(zcta_geoms, by = c("zcta" = "GEOID")) %>%
st_as_sf(sf_column_name = "geometry")
# LOAD DATA
# Load clean and crosswalked data for all zctas from ChildCareAware survey, with all other zctas and populations baked in
childcare_supply_and_demand_2019_2023 <-  read_csv(here("data", "processed", "childcare_supply_and_demand_2019_2023.csv")) %>%
mutate(zcta = as.character(zcta))
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023") %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
ratio >= 10 ~ "extreme",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert"))
map_df <- supply_and_demand_2023 %>%
mutate(status_num = case_when(status == "non-desert" ~ 0,
status == "desert" ~ 1,
status == "extreme" ~ 3)) %>%
select(zcta, status, status_num, ratio)
#write.csv(map_df, "datawrapper_map.csv")
# JOIN CROSSWAKLED DATA WITH GEOM FOR MAPPING
# Now we can use zctas to get geoms for mapping
# Get the 2017-2021 5-year ACS ZTCAs for the whole US so that we can join these with zip codes and get geoms for mapping
# B09001_005 is a dummy variable, we just need the geoms from the call
zcta_geoms <- get_acs(geography = "zip code tabulation area", variables = "B09001_005", geometry = TRUE)  %>%
select(GEOID, geometry)
# Join the survey and non-survey data with geoms from Census for mapping
# This join to zcta geoms from ACS data drops 5 values, but anti join shows they are all non-deserts and "point" zctas for PO boxes
map_df_sf <- map_df %>%
inner_join(zcta_geoms, by = c("zcta" = "GEOID")) %>%
st_as_sf(sf_column_name = "geometry")
#| output: true
# MAP DATA
tm_shape(map_df_sf) +
tm_polygons("status_num",
palette = "Reds",
legend.show = FALSE)
deserts_2023 <- supply_and_demand_2023 %>%
filter(status %in% c("desert", "extreme"))
# 202,318 in 227 zctas that are childcare deserts
sum(deserts_2023$pop_5_and_under, na.rm = TRUE)
# Same five ZCTAs didn't join, but again, these are non-deserts PO boxes anyway
mo_zctas_with_pop <- mo_zctas %>%
left_join(acs, by = c("zcta" = "GEOID")) %>%
select(zcta, pop_5_and_under)
#  442,254 children under 5 or under across the state
sum(mo_zctas_with_pop$pop_5_and_under, na.rm=TRUE)
percent_in_deserts <- 202318/442254
#| output: true
#| column: page
datatable(deserts_2023, filter = 'top', class = 'cell-border stripe order-column', extensions = 'Buttons',
options = list(
paging = TRUE,
searching = TRUE,
fixedColumns = TRUE,
autoWidth = TRUE,
ordering = TRUE,
dom = 'tB',
buttons = c('copy', 'csv', 'excel')
))
#| output: true
#| column: page
datatable(mo_zctas_with_pop, filter = 'top', class = 'cell-border stripe order-column', extensions = 'Buttons',
options = list(
paging = TRUE,
searching = TRUE,
fixedColumns = TRUE,
autoWidth = TRUE,
ordering = TRUE,
dom = 'tB',
buttons = c('copy', 'csv', 'excel')
))
View(acs)
View(acs)
View(childcare_supply_and_demand_2019_2023)
yearly_deserts <- childcare_supply_and_demand_2019_2023 %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert")) %>%
filter(status == "desert")
View(yearly_deserts)
yearly_deserts <- childcare_supply_and_demand_2019_2023 %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert"))
yearly_deserts <- childcare_supply_and_demand_2019_2023 %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert")) %>%
filter(status == "desert")
yearly_deserts <- childcare_supply_and_demand_2019_2023 %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert")) %>%
filter(status == "desert") %>%
group_by(year, month) %>%
summarize(children_in_deserts = sum(pop_5_and_under))
View(yearly_deserts)
# Load clean and crosswalked data for all zctas from ChildCareAware survey
childcare_aware <- read_csv(here("data", "processed", "ChildCareAware_cleaned_and_crosswalked.csv")) %>%
mutate(zcta = as.character(zcta))
num_programs_yearly
num_programs_yearly <- childcare_aware %>%
group_by(year, month) %>%
summarize(num_program = sum(childcare_programs))
#| output: true
#| column: page
datatable(yearly_deserts, filter = 'top', class = 'cell-border stripe order-column', extensions = 'Buttons',
options = list(
paging = TRUE,
searching = TRUE,
fixedColumns = TRUE,
autoWidth = TRUE,
ordering = TRUE,
dom = 'tB',
buttons = c('copy', 'csv', 'excel')
))
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023") %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
ratio >= 10 ~ "extreme",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert"))
View(supply_and_demand_2023)
deserts_2023 <- supply_and_demand_2023 %>%
filter(status %in% c("desert", "extreme"))
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023") %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
ratio >= 10 ~ "extreme",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert"))
deserts_2023 <- supply_and_demand_2023 %>%
filter(status %in% c("desert", "extreme"))
# 202,318 in 227 zctas that are childcare deserts
sum(deserts_2023$pop_5_and_under, na.rm = TRUE)
#| output: true
#| column: page
datatable(yearly_deserts, filter = 'top', class = 'cell-border stripe order-column', extensions = 'Buttons',
options = list(
paging = TRUE,
searching = TRUE,
fixedColumns = TRUE,
autoWidth = TRUE,
ordering = TRUE,
dom = 'tB',
buttons = c('copy', 'csv', 'excel')
))
yearly_deserts <- childcare_supply_and_demand_2019_2023 %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert")) %>%
filter(status == "desert") %>%
group_by(year, month) %>%
summarize(children_in_deserts = sum(pop_5_and_under))
#| output: true
#| column: page
datatable(yearly_deserts, filter = 'top', class = 'cell-border stripe order-column', extensions = 'Buttons',
options = list(
paging = TRUE,
searching = TRUE,
fixedColumns = TRUE,
autoWidth = TRUE,
ordering = TRUE,
dom = 'tB',
buttons = c('copy', 'csv', 'excel')
))
#| output: true
#| column: page
datatable(num_programs_yearly, filter = 'top', class = 'cell-border stripe order-column', extensions = 'Buttons',
options = list(
paging = TRUE,
searching = TRUE,
fixedColumns = TRUE,
autoWidth = TRUE,
ordering = TRUE,
dom = 'tB',
buttons = c('copy', 'csv', 'excel')
))
# Filter the capacity deserts to data from 2021 and 2022, aggregate the bi-yearly data to yearly, and remove non-desert zctas
childcare_aware_2021_2022 <- childcare_supply_and_demand_2019_2023 %>%
filter(year %in% c("2021", "2022")) %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "test"))
View(childcare_aware_2021_2022)
# Filter the capacity deserts to data from 2021 and 2022 and remove non-desert zctas
childcare_aware_2021_2022 <- childcare_supply_and_demand_2019_2023 %>%
filter(year %in% c("2021", "2022")) %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert")) %>%
filter(status == "desert")
# Filter the capacity deserts to data from 2021 and 2022 and remove non-desert zctas
supply_and_demand_2021_2022 <- childcare_supply_and_demand_2019_2023 %>%
filter(year %in% c("2021", "2022")) %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert"))
View(supply_and_demand_2021_2022)
# This join is for all funding together
relief_to_desert_join <- relief_zcta %>%
group_by(zcta, year) %>%
summarize(total = sum(amount)) %>%
left_join(deserts_2021_2022, by = c("zcta", "year"))
# This join is for all funding together
relief_to_desert_join <- relief_zcta %>%
group_by(zcta, year) %>%
summarize(total = sum(amount)) %>%
left_join(supply_and_demand_2021_2022, by = c("zcta", "year"))
View(relief_to_desert_join)
View(childcare_supply_and_demand_2019_2023)
# Join crosswalk with relief funding zips to that each zip matches a zcta to correspond to desert data
# Success! All zips found a zcta
relief_zcta <- relief_funding %>%
inner_join(zip_zcta_crosswalk, by = c("zip" = "zip_code"))
View(relief_zcta)
View(relief_funding)
relief_zcta <- relief_funding %>%
inner_join(mo_zctas, by = c("zip" = "zip_code"))
# Load all zctas not included in ChildCareAware survey
# There are 1023 unique zctas in MO according to these crosswalk
mo_zctas <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names() %>%
filter(state == "MO") %>%
distinct(zcta)
View(relief_funding)
# Load all zctas not included in ChildCareAware survey
# There are 1023 unique zctas in MO according to these crosswalk
mo_zctas <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names() %>%
filter(state == "MO")
View(mo_zctas)
View(mo_zctas)
# Join crosswalk with relief funding zips to that each zip matches a zcta to correspond to desert data
relief_zcta <- relief_funding %>%
inner_join(mo_zctas, by = c("zip" = "zip_code"))
# Join crosswalk with relief funding zips to that each zip matches a zcta to correspond to desert data
relief_zcta <- relief_funding %>%
anti_join(mo_zctas, by = c("zip" = "zip_code"))
View(relief_zcta)
pandemic_change <- (192993 - 273570)/273570
pandemic_change <- 273570 - 192993
library(tidyverse)
library(janitor)
library(readxl)
library(tidycensus)
library(here)
library(sf)
library(lubridate)
library(tmap)
library(DT)
# Cache the zip code tabulation data we want from the Census
options(tigris_use_cache = TRUE)
# Sets tmap to interactive mode
tmap_mode("view")
# LOAD DATA
# Load clean and crosswalked data for all zctas from ChildCareAware survey
childcare_aware <- read_csv(here("data", "processed", "ChildCareAware_cleaned_and_crosswalked.csv")) %>%
mutate(zcta = as.character(zcta))
# Load clean and crosswalked data for all zctas from ChildCareAware survey, with all other zctas and populations baked in
childcare_supply_and_demand_2019_2023 <-  read_csv(here("data", "processed", "childcare_supply_and_demand_2019_2023.csv")) %>%
mutate(zcta = as.character(zcta))
# Load all zctas not included in ChildCareAware survey
# There are 1023 unique zctas in MO according to these crosswalk
mo_zctas <- read_excel(here("data", "raw", "ZIPCodetoZCTACrosswalk2021UDS.xlsx"), sheet = 1) %>%
clean_names() %>%
filter(state == "MO")
# 5 year ACS estimates pf population five and under for all zctas in the country
acs <- read_csv(here("data", "processed", "pop_zcta_5acs.csv"))
crrsa_startup_expansion <-  read_excel(here("data","raw", "CRRSA Startup and Expansion with Paid.xlsx")) %>%
clean_names()
# Load all relief data with cleaned zips and years for when and where money was dispersed to
relief_funding <- read_csv(here("data", "processed", "all_relief_cleaned.csv")) %>%
mutate(zip = as.character(zip))
# Join crosswalk with relief funding zips to that each zip matches a zcta to correspond to desert data
relief_zcta <- relief_funding %>%
inner_join(mo_zctas, by = c("zip" = "zip_code"))
deserts_2023 <- supply_and_demand_2023 %>%
filter(status %in% c("desert", "extreme"))
supply_and_demand_2023 <- childcare_supply_and_demand_2019_2023 %>%
filter(year == "2023") %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 & ratio < 10 ~ "desert",
ratio >= 10 ~ "extreme",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert"))
map_df <- supply_and_demand_2023 %>%
mutate(status_num = case_when(status == "non-desert" ~ 0,
status == "desert" ~ 1,
status == "extreme" ~ 3)) %>%
select(zcta, status, status_num, ratio)
#write.csv(map_df, "datawrapper_map.csv")
yearly_deserts <- childcare_supply_and_demand_2019_2023 %>%
mutate(ratio = pop_5_and_under / licensed_capacity) %>%
mutate(status = case_when(ratio < 3 ~ "non-desert",
ratio >= 3 ~ "desert",
is.na(ratio) & pop_5_and_under >= 50 ~ "desert",
is.na(ratio) & pop_5_and_under < 50 ~ "non-desert",
TRUE ~ "non-desert")) %>%
filter(status == "desert") %>%
group_by(year, month) %>%
summarize(children_in_deserts = sum(pop_5_and_under))
num_programs_yearly <- childcare_aware %>%
group_by(year, month) %>%
summarize(num_program = sum(childcare_programs))
pandemic_change_percent <- (192993 - 273570)/273570
pandemic_change <- 273570 - 192993
View(yearly_deserts)
deserts_2023 <- supply_and_demand_2023 %>%
filter(status %in% c("desert", "extreme"))
# 202,318 in 227 zctas that are childcare deserts
sum(deserts_2023$pop_5_and_under, na.rm = TRUE)
# Same five ZCTAs didn't join, but again, these are non-deserts PO boxes anyway
mo_zctas_with_pop <- mo_zctas %>%
left_join(acs, by = c("zcta" = "GEOID")) %>%
select(zcta, pop_5_and_under)
#  442,254 children under 5 or under across the state
sum(mo_zctas_with_pop$pop_5_and_under, na.rm=TRUE)
percent_in_deserts <- 202318/442254
View(deserts_2023)
View(mo_zctas_with_pop)
